{"version":3,"sources":["pages/index/index.uvue","pages/index/index.uvue?type=page"],"sourcesContent":["<template>\r\n\t<list-view direction=\"vertical\" style=\"height: 1200rpx;\">\r\n\t\t<list-item class=\"mt-5 flex justify-center flex-column align-center\">\r\n\t\t\t<view v-if=\"todoList.length != 0\">\r\n\t\t\t\t<text class=\"text-dark font-lg p-2\">\r\n\t\t\t\t\t没吃过\r\n\t\t\t\t</text>\r\n\t\t\t</view>\r\n\t\t</list-item>\r\n\t\t<u-todo-item v-for=\"item in todoList\" :key=\"item.id\" :checked=\"item.checked\" :id=\"item.id\" :text=\"item.text\"\r\n\t\t\t@destory=\"deleteItemfromList\" @checked=\"onChecked\"></u-todo-item>\r\n\t\t<list-item class=\"mt-5 flex justify-center flex-column align-center\">\r\n\t\t\t<view v-if=\"completedList.length != 0\">\r\n\t\t\t\t<text class=\"text-dark font-lg p-2\">\r\n\t\t\t\t\t吃过\r\n\t\t\t\t</text>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"list.length == 0\">\r\n\t\t\t\t<image src=\"@/static/empty.png\"></image>\r\n\t\t\t\t<text class=\"text-light-black text-center font-lg mt-2\">没有要吃的，点击小角图片添加</text>\r\n\t\t\t</view>\r\n\t\t</list-item>\r\n\t\t<u-todo-item v-for=\"item in completedList\" :key=\"item.id\" :checked=\"item.checked\" :id=\"item.id\"\r\n\t\t\t:text=\"item.text\" @destory=\"deleteItemfromList\" @checked=\"onChecked\"></u-todo-item>\r\n\t</list-view>\r\n\t<u-action :list=\"todoList\" @output=\"appedItemToList\"></u-action>\r\n</template>\r\n\r\n<script>\r\n\timport { nanoid } from \"@/common/id.uts\"\r\n\timport { CheckedPayload } from \"@/common/type.uts\"\r\n\timport { Item } from \"@/common/type.uts\"\r\n\tconst storageKey = \"uiappx-todo-list\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlist: [] as Array<Item>\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.initListFromStorage()\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ttodoList() : Array<Item> {\r\n\t\t\t\treturn this.list.filter((item : Item) : boolean => !item.checked)\r\n\t\t\t},\r\n\t\t\tcompletedList() : Array<Item> {\r\n\t\t\t\treturn this.list.filter((item : Item) : boolean => item.checked)\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tappedItemToList(text : string) {\r\n\t\t\t\tconst item : Item = {\r\n\t\t\t\t\tid: nanoid(),\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t\tchecked: false\r\n\t\t\t\t}\r\n\t\t\t\tthis.list = [item, ...this.list]\r\n\t\t\t\tthis.updateListToStroage()\r\n\t\t\t},\r\n\t\t\tdeleteItemfromList(id : string) {\r\n\t\t\t\tthis.list = this.list.filter((item : Item) : boolean => id != item.id)\r\n\t\t\t\tthis.updateListToStroage()\r\n\t\t\t},\r\n\t\t\tonChecked(payload : CheckedPayload) {\r\n\t\t\t\tconst item = this.list.find((item : Item) : boolean => item.id == payload.id)\r\n\t\t\t\titem!.checked = payload.checked\r\n\t\t\t\tthis.updateListToStroage()\r\n\t\t\t},\r\n\t\t\tupdateListToStroage() {\r\n\t\t\t\tuni.setStorageSync(storageKey, JSON.stringify(this.list))\r\n\t\t\t},\r\n\t\t\tinitListFromStorage() {\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey: storageKey,\r\n\t\t\t\t\tsuccess: (res : GetStorageSuccess) => {\r\n\t\t\t\t\t\tconst list = JSON.parseArray<Item>(res.data as string)\r\n\t\t\t\t\t\tif (list != null) {\r\n\t\t\t\t\t\t\tthis.list = list\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>",null],"names":[],"mappings":"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"}